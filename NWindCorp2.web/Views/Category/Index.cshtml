@model List<NWindCorp2.bus.Entities.Category>
@{
    ViewBag.Title = "Categories";
}

<h2>Categories</h2>

 @Html.ActionLink("Create Category", "Create")

<ul>
    @foreach (var category in Model)
    {
        <li>@category.Name (@category.Products.Count)
         <br />
         @Html.ActionLink("Edit", "Edit", new{id=category.Id}) | 
         <form method="post" style="display:inline">
         @Html.ActionLink("Delete", "Delete", new { id = category.Id }, new { @class = "post-link" }) | 
        @Html.ActionLink("Products", "Index", "Product", new{id=category.Id}, null)
         </form>
        </li>
    }
</ul>

@section scripts{
    <script>
        $(".post-link").click(function () {
            var form = $(this).parents("form");
            form.attr("action", $(this).attr("href"));
            form.submit();
            return false;
        });
    </script>
}
